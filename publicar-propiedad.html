<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Publica tu propiedad | Altorra</title>
  <meta name="description" content="Envía los datos de tu propiedad para que Altorra la publique en su portal." />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#d4af37" />
  <meta property="og:title" content="Publica tu propiedad | Altorra" />
  <meta property="og:description" content="Envíanos los datos de tu inmueble para que lo vendamos o lo arrendemos por ti." />
  <!-- Actualizamos la imagen de social preview para compartir una escena emocional -->
  <meta property="og:image" content="/hero-family.png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --gold:#d4af37;
      --accent:#ffb400;
      --bg:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --header-h:72px;
      --page-max:1200px;
      /* Reducimos la opacidad de la superposición para un look más luminoso */
      --overlay:rgba(0,0,0,0.15);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Poppins",system-ui,-apple-system,"Segoe UI",Roboto,Arial;color:var(--text);background:transparent;}
    html,body{background:var(--bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
    a{text-decoration:none;color:inherit;}
    /* Header y footer se incluyen desde archivos externos */
    main.publish-container{
      max-width:var(--page-max);
      /* Eliminamos el margen superior ya que el espacio ahora lo aporta el hero */
      margin:0 auto 60px;
      padding:0 16px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:24px;
    }
    .publish-container h1{
      font-size:2.2rem;
      font-weight:800;
      margin-bottom:8px;
      text-align:center;
    }
    .publish-container p.lead{
      color:var(--muted);
      margin-bottom:24px;
      max-width:640px;
      text-align:center;
    }
    .publish-form{
      display:flex;
      flex-direction:column;
      gap:18px;
      max-width:600px;
      width:100%;
      margin:0 auto;
      padding:40px 32px;
      /* Aplicamos un suave degradado crema con borde dorado sutil para una apariencia premium */
      background:linear-gradient(180deg,#fffdf7,#fff9ee 60%,#fff6e8);
      border-radius:24px;
      border:1px solid rgba(212,175,55,0.25);
      box-shadow:0 20px 48px rgba(0,0,0,0.05);
    }
    .publish-form label{
      display:flex;
      flex-direction:column;
      font-weight:600;
      gap:4px;
    }
    .publish-form input,
    .publish-form select,
    .publish-form textarea{
      padding:12px 14px;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.15);
      font-size:0.95rem;
      font-family:inherit;
      background:#fff;
    }
    .publish-form textarea{
      resize:vertical;
      min-height:140px;
    }
    .publish-form button{
      align-self:flex-start;
      padding:14px 32px;
      border-radius:14px;
      font-weight:700;
      background:linear-gradient(90deg,var(--accent),#ffd95e);
      color:#000;
      border:none;
      cursor:pointer;
      transition:transform .15s ease, box-shadow .2s ease;
    }
    .publish-form button:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 32px rgba(0,0,0,0.12);
    }

    /* ======== Estilos para el header y menú reutilizados del resto del sitio ======== */
    header{
      position:fixed;top:0;left:0;right:0;height:var(--header-h);display:flex;align-items:center;
      background:var(--bg);z-index:140;border-bottom:1px solid rgba(0,0,0,0.06);
      box-shadow:0 8px 26px rgba(0,0,0,0.06);
    }
    .container{max-width:var(--page-max);margin:0 auto;width:100%;padding:0 16px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;margin-right:6px}
    .brand img{width:48px;height:48px;object-fit:contain}
    .nav-list{display:flex;gap:6px;align-items:center;margin-left:auto}
    .nav-item{position:relative}
    .nav-btn{background:transparent;border:0;padding:8px 12px;font-weight:700;cursor:pointer;border-radius:8px;color:var(--text);font-size:0.95rem}
    .nav-btn:focus{outline:3px solid rgba(212,175,55,0.18);outline-offset:3px}
    .nav-toggle{display:none;margin-left:auto;background:transparent;border:1px solid rgba(0,0,0,.1);border-radius:10px;padding:8px 12px;font-weight:800}
    .nav-toggle:focus{outline:3px solid rgba(212,175,55,0.18);outline-offset:3px}
    .menu-panel{
      display:none; position:fixed; z-index:150; padding:14px; border-radius:12px;
      background:linear-gradient(180deg,#fff,#fbfbfb); border:1px solid rgba(0,0,0,0.06);
      box-shadow:0 22px 48px rgba(0,0,0,0.12); max-height:calc(100vh - var(--header-h) - 20px); overflow:auto;
    }
    .menu-visible{display:block;opacity:1;transform:none}
    .panel-compact{min-width:220px;max-width:44vw}
    .panel-mega{min-width:360px;max-width:920px;width:min(88vw,920px)}
    .mega-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .mega-col h4{margin:0 0 8px;color:var(--gold);font-weight:700}
    .menu-link{display:block;padding:6px;border-radius:8px;color:#0f1724}
    .menu-link:hover{background:rgba(0,0,0,0.03)}
    .drawer-backdrop{
      position:fixed;inset:0;background:var(--overlay);backdrop-filter:blur(2px);-webkit-backdrop-filter:blur(2px);
      z-index:160;opacity:0;pointer-events:none;transition:opacity .2s ease;
    }
    .drawer{
      position:fixed;left:0;right:0;top:var(--header-h);
      height:calc(100vh - var(--header-h) - env(safe-area-inset-bottom));
      height:calc(100dvh - var(--header-h));
      padding-bottom:max(24px, env(safe-area-inset-bottom));
      background:#fff;z-index:161;transform:translateY(-8px);opacity:0;pointer-events:none;
      transition:transform .24s ease, opacity .2s ease; overflow:auto; border-top:1px solid rgba(0,0,0,.06);
      overscroll-behavior:contain; -webkit-overflow-scrolling:touch;
    }
    .drawer.open{transform:none;opacity:1;pointer-events:auto}
    .drawer-backdrop.open{opacity:1;pointer-events:auto}
    .drawer .block{padding:16px;border-bottom:1px solid rgba(0,0,0,.06)}
    .drawer .block:last-child{padding-bottom:max(32px, env(safe-area-inset-bottom))}
    .drawer h4{margin:0 0 8px;color:var(--gold)}
    .drawer a{display:block;padding:8px 2px}
    @media (max-width:860px){
      .nav-list{display:none}
      .nav-toggle{display:inline-flex;align-items:center;gap:8px}
      .menu-panel{display:none !important}
    }

    /* ======== Hero para la página de publicación ======== */
    .hero-publish{
      position:relative;
      min-height:60vh;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding-top:calc(var(--header-h) + 40px);
      color:#fff;
      overflow:hidden;
      margin-bottom:32px;
    }
    .hero-publish .bg{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      z-index:0;
    }
    .hero-publish .overlay{
      position:absolute;
      inset:0;
      background:linear-gradient(180deg,rgba(0,0,0,0.15),rgba(0,0,0,0.45));
      z-index:1;
    }
    .hero-publish .inner{
      position:relative;
      z-index:2;
      padding:0 16px;
      max-width:960px;
    }
    .hero-publish h1{
      font-size:clamp(2.2rem,5vw,3rem);
      margin:0;
      font-weight:800;
    }
    .hero-publish p{
      margin-top:12px;
      font-size:1.1rem;
      color:rgba(255,255,255,0.92);
    }

    /* Sección informativa sobre beneficios de publicar */
    .info-section{max-width:var(--page-max);margin:0 auto 40px;padding:0 16px;}
    .info-card{
      background:linear-gradient(180deg,#fffdf8,#fff8eb);
      border-radius:24px;
      padding:40px;
      box-shadow:0 12px 30px rgba(0,0,0,0.05);
      max-width:720px;
      margin:0 auto;
      text-align:center;
    }
    .info-card h2{
      margin:0 0 16px;
      font-size:1.8rem;
      font-weight:800;
      color:var(--gold);
    }
    .info-card ul{
      list-style:none;
      padding:0;
      margin:0;
      color:var(--muted);
      font-size:1rem;
    }
    .info-card ul li{
      margin:8px 0;
      position:relative;
      padding-left:0;
    }
    .info-card ul li::before{
      content:'\2713';
      color:var(--gold);
      margin-right:8px;
      font-weight:800;
    }
  </style>
</head>
<body>
  <!-- Insertamos directamente el mismo encabezado y menú que en el resto del sitio para una experiencia coherente -->
  <header>
    <div class="container">
      <a class="brand" href="home.html">
        <img src="https://i.postimg.cc/SsPmBFXt/Chat-GPT-Image-9-ago-2025-10-31-20.png" alt="Logo de Altorra" width="48" height="48"/>
      </a>
      <!-- Navegación de escritorio -->
      <nav aria-label="Menú principal">
        <div class="nav-list">
          <div class="nav-item" data-size="compact">
            <button class="nav-btn" data-panel="panel-propiedades" aria-controls="panel-propiedades" aria-expanded="false">Propiedades</button>
          </div>
          <div class="nav-item" data-size="mega">
            <button class="nav-btn" data-panel="panel-servicios" aria-controls="panel-servicios" aria-expanded="false">Servicios</button>
          </div>
          <div class="nav-item" data-size="compact">
            <button class="nav-btn" data-panel="panel-nosotros" aria-controls="panel-nosotros" aria-expanded="false">Nosotros</button>
          </div>
          <div class="nav-item">
            <a class="nav-btn" href="contacto.html">Contacto</a>
          </div>
        </div>
      </nav>
      <!-- Botón móvil -->
      <button id="navToggle" class="nav-toggle" aria-controls="mobileMenu" aria-expanded="false" aria-label="Abrir menú">☰ Menú</button>
    </div>
  </header>

  <!-- Paneles desplegables de escritorio -->
  <div id="panel-propiedades" class="menu-panel panel-compact" role="dialog" aria-modal="false" aria-hidden="true">
    <a class="menu-link" href="propiedades-comprar.html">Comprar</a>
    <a class="menu-link" href="propiedades-arrendar.html">Arrendar</a>
    <a class="menu-link" href="propiedades-alojamientos.html">Rentar por días</a>
  </div>
  <div id="panel-servicios" class="menu-panel panel-mega" role="dialog" aria-modal="false" aria-hidden="true">
    <div class="mega-grid">
      <div class="mega-col">
        <h4>Gestión</h4>
        <a class="menu-link" href="servicios-administracion.html">Administración de inmuebles</a>
        <a class="menu-link" href="servicios-avaluos.html">Avalúos</a>
        <a class="menu-link" href="servicios-mantenimiento.html">Mantenimiento y reparaciones</a>
        <a class="menu-link" href="servicios-mudanzas.html">Mudanzas y logística</a>
      </div>
      <div class="mega-col">
        <h4>Jurídico &amp; Contable</h4>
        <a class="menu-link" href="servicios-juridicos.html">Servicios jurídicos</a>
        <a class="menu-link" href="servicios-contables.html">Servicios contables</a>
        <a class="menu-link" href="#">Gestión de contratos</a>
      </div>
      <div class="mega-col">
        <h4>Turismo (Cartagena)</h4>
        <a class="menu-link" href="#">Renta de yates</a>
        <a class="menu-link" href="#">Pasadías en islas</a>
        <a class="menu-link" href="#">Paquetes turísticos</a>
        <a class="menu-link" href="#">Tours históricos</a>
      </div>
    </div>
  </div>
  <div id="panel-nosotros" class="menu-panel panel-compact" role="dialog" aria-modal="false" aria-hidden="true">
    <a class="menu-link" href="quienes-somos.html">Quiénes somos</a>
    <a class="menu-link" href="quienes-somos.html#mision">Misión</a>
    <a class="menu-link" href="quienes-somos.html#vision">Visión</a>
    <a class="menu-link" href="quienes-somos.html#valores">Valores</a>
    <a class="menu-link" href="quienes-somos.html#equipo">Nuestro equipo</a>
  </div>

  <!-- Menú móvil tipo drawer -->
  <div id="drawerBackdrop" class="drawer-backdrop" aria-hidden="true"></div>
  <aside id="mobileMenu" class="drawer" role="dialog" aria-modal="true" aria-labelledby="mobileMenuTitle" hidden>
    <div class="block">
      <h3 id="mobileMenuTitle" style="margin:0;font-weight:800;color:var(--gold)">Menú</h3>
    </div>
    <div class="block">
      <h4>Propiedades</h4>
      <a href="propiedades-comprar.html">Comprar</a>
      <a href="propiedades-arrendar.html">Arrendar</a>
      <a href="propiedades-alojamientos.html">Rentar por días</a>
    </div>
    <div class="block">
      <h4>Servicios</h4>
      <a href="servicios-administracion.html">Administración de inmuebles</a>
      <a href="servicios-avaluos.html">Avalúos</a>
      <a href="servicios-mantenimiento.html">Mantenimiento y reparaciones</a>
      <a href="servicios-mudanzas.html">Mudanzas y logística</a>
      <a href="servicios-juridicos.html">Servicios jurídicos</a>
      <a href="servicios-contables.html">Servicios contables</a>
      <a href="#">Gestión de contratos</a>
      <h4 style="margin-top:12px">Turismo (Cartagena)</h4>
      <a href="#">Renta de yates</a>
      <a href="#">Pasadías en islas</a>
      <a href="#">Paquetes turísticos</a>
      <a href="#">Tours históricos</a>
    </div>
    <div class="block">
      <h4>Empresa</h4>
      <a href="quienes-somos.html">Quiénes somos</a>
      <a href="contacto.html">Contacto</a>
      <a href="home.html">Inicio</a>
    </div>
  </aside>
  <!-- Hero sección para inspiración y contexto -->
  <section class="hero-publish">
    <img class="bg" src="/hero-house.png" alt="Casa moderna y elegante"/>
    <div class="overlay" aria-hidden="true"></div>
    <div class="inner">
      <h1>Publica tu propiedad</h1>
      <p>Vende, arrienda o renta tu inmueble con el respaldo de Altorra Inmobiliaria.</p>
    </div>
  </section>

  <!-- Sección informativa sobre los beneficios de publicar con Altorra -->
  <section class="info-section">
    <div class="info-card">
      <h2>¿Por qué publicar con Altorra?</h2>
      <ul>
        <li>Difusión en múltiples canales de venta y arriendo.</li>
        <li>Asesoría jurídica y acompañamiento integral.</li>
        <li>Amplia red de clientes potenciales.</li>
        <li>Nos encargamos de todo el proceso por ti.</li>
      </ul>
    </div>
  </section>
  <main class="publish-container">
    <p class="lead">Completa el siguiente formulario y un asesor de Altorra se pondrá en contacto contigo para ayudarte a publicar tu inmueble.</p>
    <form class="publish-form" action="https://formsubmit.co/altorrainmobiliaria@gmail.com" method="POST">
      <!-- Formsubmit configuration -->
      <input type="hidden" name="_subject" value="Solicitud para publicar propiedad" />
      <input type="hidden" name="_next" value="gracias.html" />
      <label>
        Nombre completo
        <input type="text" name="Nombre" required />
      </label>
      <label>
        Correo electrónico
        <input type="email" name="Email" required />
      </label>
      <label>
        Teléfono de contacto
        <input type="tel" name="Teléfono" required />
      </label>
      <label>
        Ciudad
        <input type="text" name="Ciudad" required />
      </label>
      <label>
        Operación
        <select name="Operación" required>
          <option value="Comprar">Venta</option>
          <option value="Arrendar">Arriendo</option>
          <option value="Por días">Por días</option>
        </select>
      </label>
      <label>
        Tipo de propiedad
        <select name="Tipo" required>
          <option value="Apartamento">Apartamento</option>
          <option value="Casa">Casa</option>
          <option value="Oficina">Oficina</option>
          <option value="Lote">Lote</option>
          <option value="Otro">Otro</option>
        </select>
      </label>
      <label>
        Precio estimado (COP)
        <input type="number" name="Precio" min="0" />
      </label>
      <label>
        Descripción de la propiedad
        <textarea name="Descripción" placeholder="Cuéntanos sobre habitaciones, baños, metros cuadrados, características especiales, etc." required></textarea>
      </label>
      <button type="submit">Enviar solicitud</button>
    </form>
  </main>
  <!-- Insertamos directamente el mismo pie de página que en el resto del sitio para coherencia -->
  <footer>
    <div class="footer-grid">
      <div>
         <h3 style="margin:0;color:var(--gold);font-weight:800">ALTORRA INMOBILIARIA</h3>
        <p style="color:#cbd5e1;margin-top:8px;line-height:1.4">
          Administración, Arriendo y Venta de Inmuebles<br/>
          Avalúos<br/>
          Servicios Legales Especializados
        </p>
        <div style="margin-top:12px;font-weight:800;color:var(--gold)">+57&nbsp;323&nbsp;501&nbsp;6747</div>
      </div>
      <div>
        <h4 style="margin:0 0 8px;font-weight:700">Propiedades</h4>
        <ul style="margin:0;padding:0;list-style:none;color:#cbd5e1">
          <li><a href="propiedades-comprar.html" style="color:#cbd5e1">Comprar</a></li>
          <li><a href="propiedades-arrendar.html" style="color:#cbd5e1">Arrendar</a></li>
          <li><a href="propiedades-alojamientos.html" style="color:#cbd5e1">Por días</a></li>
        </ul>
      </div>
      <div>
        <h4 style="margin:0 0 8px;font-weight:700">Servicios</h4>
        <ul style="margin:0;padding:0;list-style:none;color:#cbd5e1">
          <li><a href="servicios-administracion.html" style="color:#cbd5e1">Administración</a></li>
          <li><a href="servicios-juridicos.html" style="color:#cbd5e1">Servicios jurídicos</a></li>
          <li><a href="servicios-contables.html" style="color:#cbd5e1">Servicios contables</a></li>
        </ul>
      </div>
      <div>
        <h4 style="margin:0 0 8px;font-weight:700">Empresa</h4>
        <ul style="margin:0;padding:0;list-style:none;color:#cbd5e1">
          <li><a href="quienes-somos.html" style="color:#cbd5e1">Quiénes somos</a></li>
          <li><a href="contacto.html" style="color:#cbd5e1">Contacto</a></li>
          <li><a href="home.html" style="color:#cbd5e1">Inicio</a></li>
        </ul>
      </div>
    </div>
    <div style="max-width:var(--page-max);margin:18px auto 0;color:#9ca3af;text-align:center;font-size:0.9rem">© 2025 Altorra Inmobiliaria — Hecho con confianza.</div>
  </footer>
  <script>
    if('serviceWorker' in navigator){
      navigator.serviceWorker.register('/service-worker.js').catch(function(err){ console.warn('SW registration failed', err); });
    }
  </script>

  <!-- Scripts para hacer funcionar los menús desplegables y el drawer móvil del header.
       Copiados de las páginas de listados para mantener la coherencia de navegación -->
  <script>
  /* ---------------- Menú desplegable (desktop) ---------------- */
  (function(){
    const supportsHover = window.matchMedia('(hover: hover)').matches;
    let open = null;
    function resetPanelStyles(panel){
      panel.style.display = '';
      panel.style.visibility = '';
      panel.style.position = '';
      panel.style.left = '';
      panel.style.top = '';
      panel.style.width = '';
      panel.style.maxWidth = '';
      panel.style.maxHeight = '';
    }
    const MARGIN = 16;
    function placeAndShow(btn,panel,size){
      if(open && open.panel === panel){ return; }
      if(open) hideImmediate(open);
      panel.style.display = 'block';
      panel.style.visibility = 'hidden';
      panel.style.position = 'fixed';
      panel.style.maxHeight = Math.max(260, window.innerHeight - (MARGIN*2)) + 'px';
      if(size === 'mega'){
        panel.style.width = Math.min(920, window.innerWidth - (MARGIN*2)) + 'px';
      } else {
        panel.style.width = 'auto';
        panel.style.maxWidth = Math.min(520, window.innerWidth - (MARGIN*2)) + 'px';
      }
      const preRect = panel.getBoundingClientRect();
      const bRect = btn.getBoundingClientRect();
      let left;
      if(size === 'mega'){
        left = Math.round(bRect.left + bRect.width/2 - preRect.width/2);
        left = Math.max(MARGIN, Math.min(left, window.innerWidth - preRect.width - MARGIN));
      } else {
        left = Math.round(Math.min(bRect.left, window.innerWidth - preRect.width - MARGIN));
        left = Math.max(left, MARGIN);
      }
      let top = Math.round(bRect.bottom + 8);
      if(top + preRect.height > window.innerHeight - MARGIN){
        top = Math.round(bRect.top - preRect.height - 8);
        if(top < MARGIN) top = MARGIN;
      }
      panel.style.left = left + 'px';
      panel.style.top = top + 'px';
      panel.style.visibility = 'visible';
      panel.classList.add('menu-visible');
      panel.setAttribute('aria-hidden','false');
      btn.setAttribute('aria-expanded','true');
      open = {panel, btn};
    }
    function hideImmediate(obj){
      if(!obj) return;
      obj.btn && obj.btn.setAttribute('aria-expanded','false');
      obj.panel.classList.remove('menu-visible');
      obj.panel.style.display='none';
      obj.panel.setAttribute('aria-hidden','true');
      resetPanelStyles(obj.panel);
      if(open && open.panel === obj.panel) open = null;
    }
    document.querySelectorAll('.nav-btn[data-panel]').forEach(btn=>{
      const panelId = btn.getAttribute('data-panel');
      const panel = document.getElementById(panelId);
      const item = btn.closest('.nav-item');
      const size = item ? (item.dataset.size || 'compact') : 'compact';
      let openTimer=null, closeTimer=null;
      const show = ()=> { clearTimeout(closeTimer); openTimer = setTimeout(()=>{ placeAndShow(btn, panel, size); }, 60); };
      const hide = ()=> { clearTimeout(openTimer); closeTimer = setTimeout(()=>{ hideImmediate({panel, btn}); }, 120); };
      if(supportsHover){
        btn.addEventListener('pointerenter', show);
        btn.addEventListener('pointerleave', hide);
        panel.addEventListener('pointerenter', ()=> { clearTimeout(closeTimer); clearTimeout(openTimer); });
        panel.addEventListener('pointerleave', hide);
      }
      btn.addEventListener('click', (e)=> {
        if(window.innerWidth > 860){
          e.preventDefault();
          if(panel.classList.contains('menu-visible')) hideImmediate({panel, btn});
          else placeAndShow(btn, panel, size);
        }
      });
      btn.addEventListener('focus', show);
      btn.addEventListener('blur', ()=> setTimeout(()=>{ if(!panel.contains(document.activeElement)) hide(); }, 60));
    });
    document.addEventListener('click', (e)=>{
      if(e.target.closest('nav') || e.target.closest('.menu-panel')) return;
      document.querySelectorAll('.menu-panel.menu-visible').forEach(p=> hideImmediate({panel:p, btn:null}));
    });
    document.addEventListener('keydown', (e)=> {
      if(e.key === 'Escape'){
        document.querySelectorAll('.menu-panel.menu-visible').forEach(p=> hideImmediate({panel:p, btn:null}));
      }
    });
    window.addEventListener('resize', ()=> {
      document.querySelectorAll('.menu-panel').forEach(p=> { p.classList.remove('menu-visible'); p.style.display='none'; p.setAttribute('aria-hidden','true'); resetPanelStyles(p); });
      document.querySelectorAll('.nav-btn[data-panel]').forEach(b => b.setAttribute('aria-expanded','false'));
      open = null;
    });
  })();

  /* ---------------- Drawer móvil ---------------- */
  (function(){
    const toggle = document.getElementById('navToggle');
    const drawer = document.getElementById('mobileMenu');
    const backdrop = document.getElementById('drawerBackdrop');
    if(!toggle || !drawer || !backdrop) return;
    let lastFocus = null;
    function focusable(root){ return root.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])'); }
    function setDrawerHeight(){
      const headerH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--header-h')) || 72;
      drawer.style.height = (window.innerHeight - headerH) + 'px';
    }
    function clearDrawerHeight(){ drawer.style.height = ''; }
    function openDrawer(){
      lastFocus = document.activeElement;
      drawer.hidden = false;
      setDrawerHeight();
      window.addEventListener('resize', setDrawerHeight);
      window.addEventListener('orientationchange', setDrawerHeight);
      requestAnimationFrame(()=> {
        drawer.classList.add('open');
        backdrop.classList.add('open');
        document.body.style.overflow='hidden';
        toggle.setAttribute('aria-expanded','true');
        const el = focusable(drawer)[0];
        el && el.focus();
      });
    }
    function closeDrawer(){
      drawer.classList.remove('open');
      backdrop.classList.remove('open');
      document.body.style.overflow='';
      toggle.setAttribute('aria-expanded','false');
      clearDrawerHeight();
      window.removeEventListener('resize', setDrawerHeight);
      window.removeEventListener('orientationchange', setDrawerHeight);
      requestAnimationFrame(()=> {
        drawer.hidden = true;
        if(lastFocus) lastFocus.focus();
      });
    }
    toggle.addEventListener('click', ()=> {
      if(drawer.classList.contains('open')) closeDrawer();
      else openDrawer();
    });
    backdrop.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=> {
      if(e.key === 'Escape' && drawer.classList.contains('open')) closeDrawer();
    });
  })();
  </script>
</body>
</html>